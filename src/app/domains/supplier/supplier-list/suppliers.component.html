<nz-breadcrumb [nzAutoGenerate]="true"></nz-breadcrumb>
<div class="table-container">


    <div class="site-page-header-ghost-wrapper">
        <nz-page-header nzTitle="Suppplier List" [nzGhost]="false">
            <nz-page-header-extra>
                <lib-table-operations [showSelector1]="false" [isLocalSearch]="false" (add)="onAdd()" />

            </nz-page-header-extra>

        </nz-page-header>
    </div>

    <div class="enterprise-table-wrapper">
        @if (data$ | async; as data) {
        <nz-table #nzTable [nzData]="data" [nzFrontPagination]="true" [nzPageSize]="10" nzSize="middle"
            [nzScroll]="{ x: '1400px' }">
            <thead>
                <tr>
                    <th nzLeft nzWidth="60px" nzAlign="center">Sn.</th>
                    <th nzLeft nzWidth="200px">Supplier Name</th>
                    <th nzWidth="200px">Business Name</th>
                    <th nzWidth="150px">Contact Details</th>
                    <th nzWidth="150px">Location</th>
                    <th nzWidth="120px" nzAlign="center">PAN/VAT</th>
                    <th nzWidth="140px" nzAlign="right">Outstanding (Rs.)</th>
                    <th nzRight nzWidth="160px" nzAlign="center">Action</th>
                </tr>
            </thead>
            <tbody>
                @for (supplier of nzTable.data; track supplier.supplierId; let i = $index) {
                <tr class="enterprise-row">
                    <td nzLeft nzAlign="center" class="num-mono text-muted">
                        {{ (nzTable.nzPageIndex - 1) * nzTable.nzPageSize + (i + 1) }}
                    </td>

                    <td nzLeft class="sticky-col-main">
                        {{ supplier.name | titlecase }}
                    </td>

                    <td class="business-text">
                        {{ supplier.businessName | titlecase }}
                    </td>

                    <td>
                        <div class="contact-stack">
                            <span class="primary-phone"><span nz-icon nzType="phone"></span> {{ supplier.mobile1
                                }}</span>
                            @if(supplier.mobile2) {
                            <span class="secondary-phone">{{ supplier.mobile2 }}</span>
                            }
                        </div>
                    </td>

                    <td>
                        <span class="location-tag">
                            <span nz-icon nzType="environment"></span> {{ supplier.location | titlecase }}
                        </span>
                    </td>

                    <td nzAlign="center" class="num-mono pan-text">
                        {{ supplier.pan || '-' }}
                    </td>

                    <td nzAlign="right" class="num-mono balance-cell" [class.debt]="supplier.balance > 0"
                        [class.cleared]="supplier.balance <= 0">
                        {{ supplier.balance | number:'1.2-2' }}
                    </td>

                    <td nzRight nzAlign="center">
                        <div class="action-bundle">
                            <lib-table-action-buttons [showDeleteButton]="true" [showViewMoreButton]="true"
                                [showButton4]="true" [button3Icon]="'transaction'" [button4Icon]="'dollar'"
                                [button3Label]="'Purchase'" [button4Label]="'Pay'"
                                (delete)="onDelete(supplier.supplierId)" (edit)="onEdit(supplier.supplierId)"
                                (viewMore)="onViewMore(supplier.supplierId)"
                                (buttonAction4)="onPayment(supplier.supplierId)" />
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </nz-table>
        }
    </div>

</div>