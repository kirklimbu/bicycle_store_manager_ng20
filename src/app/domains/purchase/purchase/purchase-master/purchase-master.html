<!-- <nz-breadcrumb [nzAutoGenerate]="true"></nz-breadcrumb> -->
<div class="table-container">
    <div class="site-page-header-ghost-wrapper">
        <nz-page-header nzTitle="Purchase Master List" [nzGhost]="false">
            <nz-page-header-extra>
                <lib-table-operations [showSelector1]="false" [selector1Options]="manualSelectorOptions"
                    [showAddButton]="false" [isLocalSearch]="false" [showSearch]="false" [showFromDate]="true"
                    [showToDate]="true" [defaultFromDate]="initialFilters().fromDate" [showSearchButton]="true"
                    [defaultToDate]="initialFilters().toDate" [showExportButton]="false" [showAddButton]="true"
                    (search)="onSearch($event)" (add)="onAdd()" />
            </nz-page-header-extra>
        </nz-page-header>

    </div>

    <div class="enterprise-table-wrapper">
        @if (data; as tableData) {
        <nz-table #nzTable [nzData]="tableData" [nzFrontPagination]="true" [nzPageSize]="10" nzSize="middle"
            [nzScroll]="{ x: '1800px' }">
            <thead>
                <tr>
                    @for (column of listOfColumns; track column.name) {
                    <th [nzLeft]="column.stickyLeft || false" [nzRight]="column.stickyRight || false"
                        [nzWidth]="column.width" [nzAlign]="column.align || 'center'"
                        [nzFilters]="column.listOfFilter || []" [nzFilterFn]="column.filterFn || null">
                        {{ column.name }}
                    </th>
                    }
                </tr>
            </thead>
            <tbody>
                @for (purchase of nzTable.data | search: filterCriteria; track purchase.purchaseId; let i = $index) {
                <tr class="enterprise-row">
                    <td nzAlign="center" class="num-mono text-muted">
                        {{ (nzTable.nzPageIndex - 1) * nzTable.nzPageSize + (i + 1) }}
                    </td>

                    <td class="bill-cell">{{ purchase.billNo || 'N/A' }}</td>
                    <td nzAlign="center" class="date-cell">{{ purchase.saveDate }}</td>

                    <td class="supplier-bill-cell">{{ purchase.supplierBillNo }}</td>
                    <td nzAlign="center" class="date-cell">{{ purchase.supplierSaveDate }}</td>

                    <td nzAlign="right" class="num-mono">{{ purchase.taxableAmt | number:'1.2-2' }}</td>
                    <td nzAlign="right" class="num-mono tax-text">{{ purchase.taxAmt | number:'1.2-2' }}</td>
                    <td nzAlign="right" class="num-mono net-amt-cell">{{ purchase.netAmt | number:'1.2-2' }}</td>
                    <td nzAlign="right" class="num-mono discount-text">{{ purchase.discountAmt | number:'1.2-2' }}</td>
                    <td nzAlign="right" class="num-mono total-amt-cell">{{ purchase.totalAmt | number:'1.2-2' }}</td>

                    <td nzAlign="center">
                        <span class="pay-type-tag" [class.credit]="purchase.payType === 'Credit'">
                            {{ purchase.payType }}
                        </span>
                    </td>

                    <td nzRight nzAlign="center">
                        <div class="action-bundle">
                            <lib-table-action-buttons [showEditButton]="true" [showDeleteButton]="false"
                                [showButton4]="true" [showViewMoreButton]="false" [button4Label]="'Return'"
                                [button4Icon]="'rollback'" (edit)="onEdit(purchase)"
                                (buttonAction4)="onPurchaseReturn(purchase)" />
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </nz-table>
        }
    </div>
</div>