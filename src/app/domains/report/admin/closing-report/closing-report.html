<!-- <nz-breadcrumb [nzAutoGenerate]="true"></nz-breadcrumb> -->
<div class="table-container">
    <div class="site-page-header-ghost-wrapper">
        <nz-page-header nzTitle="Closing Stock Report" [nzGhost]="false">
            <!-- <nz-page-header-extra>
                
                <lib-table-operations [showSelector1]="false" [selector1Options]="manualSelectorOptions"
                    [showAddButton]="false" [isLocalSearch]="false" [showSearch]="false" [showFromDate]="true"
                    [showToDate]="true" [showSecondaryButton]="isCustomerMode()" [showTertiaryButton]="isCustomerMode()"
                    [secondaryButtonLabel]="'Sales'" [tertiaryButtonLabel]="'Sales Return'" (search)="onSearch($event)"
                    (secondaryButtonClick)="onSales()" (tertiaryButtonClick)="onSalesReturn()" />
            </nz-page-header-extra> -->

        </nz-page-header>
    </div>

    <div class="enterprise-table-wrapper">
        @if (data$ | async; as data) {
        <nz-table #nzTable [nzData]="data" [nzFrontPagination]="true" [nzPageSize]="10" nzSize="middle"
            [nzScroll]="{ x: '1000px' }">
            <thead>
                <tr>
                    <th nzLeft nzWidth="60px" nzAlign="center">#</th>
                    <th nzLeft nzWidth="250px">Stock Name</th>
                    <th nzWidth="150px" nzAlign="center">Batch / Lot</th>
                    <th nzWidth="120px" nzAlign="center">Closing Qty</th>
                    <th nzWidth="150px" nzAlign="right">Unit Rate (Rs.)</th>
                    <th nzWidth="180px" nzAlign="right" class="highlight-header">Total Valuation (Rs.)</th>
                </tr>
            </thead>
            <tbody>
                @for (item of nzTable.data; track item.stockMasterId; let i = $index) {
                <tr class="enterprise-row">
                    <td nzLeft nzAlign="center" class="num-mono text-muted">
                        {{ (nzTable.nzPageIndex - 1) * nzTable.nzPageSize + (i + 1) }}
                    </td>

                    <td nzLeft class="sticky-col-main">
                        {{ item.stockName | titlecase }}
                    </td>

                    <td nzAlign="center">
                        @if(item.batch) {
                        <span class="batch-badge">{{ item.batch }}</span>
                        }@else{
                        <span class="text-muted">-</span>
                        }
                    </td>

                    <td nzAlign="center" class="num-mono">
                        <span class="qty-text" [class.low-stock]="item.closingQty <= 0">
                            {{ item.closingQty | number }}
                        </span>
                    </td>

                    <td nzAlign="right" class="num-mono text-muted">
                        {{ item.costPerUnit | number:'1.2-2' }}
                    </td>

                    <td nzAlign="right" class="num-mono valuation-cell">
                        {{ item.totalAmt | number:'1.2-2' }}
                    </td>
                </tr>
                }
            </tbody>

            <!-- <tfoot class="enterprise-footer">
                <tr>
                    <td [nzLeft]="true" [colspan]="2">Inventory Summary</td>
                    <td colspan="3" class="hide-mobile"></td>
                    <td nzAlign="right" class="footer-grand-total">
                        <small>Total Value:</small> {{ calculateTotal(data) | number:'1.2-2' }}
                    </td>
                </tr>
            </tfoot> -->
        </nz-table>
        }
    </div>

</div>